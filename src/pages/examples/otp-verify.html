<!--

=========================================================
* viglu - Dashboard
=========================================================
* Copyright by Luc Vigato (2025) - https://github.com/viglu/viglu-dashboard
* License: MIT (https://github.com/viglu/viglu-dashboard/blob/master/LICENSE.md)
=========================================================
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. Please contact us to request a removal. Contact us if you want to remove it.


-->
<!DOCTYPE html>
<html lang="en">

<head>
    @@include('./_head.html', {
    "path": "../..",
    "title": "Volt Premium Bootstrap Dashboard - OTP Verification"
    })
</head>

<body>

<!-- NOTICE: You can use the _analytics.html partial to include production code specific code & trackers -->
@@if (environment === 'production') {
@@include('./_analytics_body.html')
}

<main>

    <!-- Section -->
    <section class="vh-lg-100 mt-5 mt-lg-0 bg-soft d-flex align-items-center">
        <div class="container">
            <p class="text-center">
                <a href="./sign-in.html" class="d-flex align-items-center justify-content-center">
                    <svg class="icon icon-xs me-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    Back to log in
                </a>
            </p>
            <div class="row justify-content-center form-bg-image" data-background-lg="../../assets/img/illustrations/signin.svg">
                <div class="col-12 d-flex align-items-center justify-content-center">
                    <div class="bg-white shadow border-0 rounded border-light p-4 p-lg-5 w-100 fmxw-500">
                        <div class="text-center text-md-center mb-4 mt-md-0">
                            <h1 class="mb-0 h3">Verify Your Identity</h1>
                            <p class="text-gray mt-3">Enter the 6-digit code sent to your email or mobile device</p>
                        </div>
                        <form action="#" class="mt-4">
                            <!-- OTP Input Fields -->
                            <div class="form-group mb-4">
                                <label for="otp-code" class="mb-3">Enter OTP Code</label>
                                <div class="d-flex justify-content-between gap-2 otp-input-container">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-1" required autocomplete="off">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-2" required autocomplete="off">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-3" required autocomplete="off">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-4" required autocomplete="off">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-5" required autocomplete="off">
                                    <input type="text" maxlength="1" class="form-control form-control-lg text-center otp-input" id="otp-6" required autocomplete="off">
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid">
                                <button type="submit" class="btn btn-gray-800">Verify Code</button>
                            </div>
                        </form>

                        <!-- Resend Code -->
                        <div class="mt-4 text-center">
                            <p class="mb-0">
                                Didn't receive the code?
                                <a href="#" class="fw-bold" id="resend-code">Resend Code</a>
                            </p>
                            <p class="text-muted small mt-2" id="timer-text">
                                You can request a new code in <span id="countdown">60</span> seconds
                            </p>
                        </div>

                        <!-- Additional Options -->
                        <div class="d-flex justify-content-center align-items-center mt-4">
                                <span class="fw-normal">
                                    Having trouble?
                                    <a href="./forgot-password.html" class="fw-bold">Contact Support</a>
                                </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>

@@include('./_scripts.html', {
"path": "../.."
})

<!-- Custom OTP JavaScript -->
<script>
    // OTP Input Auto-focus and Navigation
    document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('.otp-input');
        const resendButton = document.getElementById('resend-code');
        const timerText = document.getElementById('timer-text');
        const countdownElement = document.getElementById('countdown');
        let countdown = 60;
        let timerInterval;

        // Auto-focus next input on entry
        inputs.forEach((input, index) => {
            input.addEventListener('input', function(e) {
                const value = e.target.value;

                // Only allow numbers
                if (!/^\d*$/.test(value)) {
                    e.target.value = '';
                    return;
                }

                // Move to next input if value is entered
                if (value.length === 1 && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });

            // Handle backspace to move to previous input
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    inputs[index - 1].focus();
                }

                // Handle arrow keys for navigation
                if (e.key === 'ArrowLeft' && index > 0) {
                    inputs[index - 1].focus();
                }
                if (e.key === 'ArrowRight' && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });

            // Handle paste event
            input.addEventListener('paste', function(e) {
                e.preventDefault();
                const pasteData = e.clipboardData.getData('text');
                const pasteDigits = pasteData.replace(/\D/g, '').split('').slice(0, 6);

                pasteDigits.forEach((digit, i) => {
                    if (inputs[i]) {
                        inputs[i].value = digit;
                    }
                });

                // Focus on the last filled input or first empty one
                const lastFilledIndex = Math.min(pasteDigits.length, inputs.length) - 1;
                if (lastFilledIndex < inputs.length - 1) {
                    inputs[lastFilledIndex + 1].focus();
                } else {
                    inputs[lastFilledIndex].focus();
                }
            });
        });

        // Countdown timer
        function startCountdown() {
            countdown = 60;
            resendButton.classList.add('disabled');
            resendButton.style.pointerEvents = 'none';
            resendButton.style.opacity = '0.5';
            timerText.style.display = 'block';

            timerInterval = setInterval(function() {
                countdown--;
                countdownElement.textContent = countdown;

                if (countdown <= 0) {
                    clearInterval(timerInterval);
                    resendButton.classList.remove('disabled');
                    resendButton.style.pointerEvents = 'auto';
                    resendButton.style.opacity = '1';
                    timerText.style.display = 'none';
                }
            }, 1000);
        }

        // Start countdown on page load
        startCountdown();

        // Resend code handler
        resendButton.addEventListener('click', function(e) {
            e.preventDefault();
            if (!this.classList.contains('disabled')) {
                // Clear all inputs
                inputs.forEach(input => input.value = '');
                inputs[0].focus();

                // Show success message (you can customize this)
                alert('A new verification code has been sent to your email/phone.');

                // Restart countdown
                startCountdown();
            }
        });

        // Form submission
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();

            // Collect OTP value
            const otpValue = Array.from(inputs).map(input => input.value).join('');

            if (otpValue.length !== 6) {
                alert('Please enter all 6 digits of the verification code.');
                return;
            }

            // Here you would typically send the OTP to your backend for verification
            console.log('OTP Submitted:', otpValue);

            // Simulate verification (replace with actual API call)
            // For demonstration purposes only
            alert('Verifying code: ' + otpValue);

            // On successful verification, redirect to dashboard
            // window.location.href = '../dashboard/dashboard.html';
        });

        // Focus first input on page load
        inputs[0].focus();
    });
</script>

<!-- Custom CSS for OTP inputs -->
<style>
    .otp-input-container {
        max-width: 400px;
        margin: 0 auto;
    }

    .otp-input {
        width: 60px;
        height: 60px;
        font-size: 24px;
        font-weight: bold;
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
    }

    .otp-input:focus {
        border-color: #262b40;
        box-shadow: 0 0 0 0.2rem rgba(38, 43, 64, 0.25);
        outline: 0;
    }

    .otp-input::-webkit-outer-spin-button,
    .otp-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .otp-input[type=number] {
        -moz-appearance: textfield;
    }

    @media (max-width: 576px) {
        .otp-input {
            width: 45px;
            height: 45px;
            font-size: 20px;
        }
    }
</style>

</body>

</html>